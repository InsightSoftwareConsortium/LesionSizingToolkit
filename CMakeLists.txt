CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
IF(COMMAND CMAKE_POLICY)
  CMAKE_POLICY(SET CMP0003 NEW)
ENDIF(COMMAND CMAKE_POLICY)

PROJECT(LesionSizingToolkit)

FIND_PACKAGE(ITK REQUIRED)
INCLUDE(${ITK_USE_FILE})

SET(EXECUTABLE_OUTPUT_PATH ${LesionSizingToolkit_BINARY_DIR}/bin CACHE INTERNAL "Where to put the executables") 
SET(LIBRARY_OUTPUT_PATH ${LesionSizingToolkit_BINARY_DIR}/bin CACHE INTERNAL "Where to put the libraries") 

OPTION(LSTK_SANDBOX_BUILD_REPORTS "Build Lesion Sizing Toolkit with LaTeX reports." OFF)

OPTION(LSTK_SANDBOX_USE_VTK "Build visualization helper tools." OFF)

IF( LSTK_SANDBOX_BUILD_REPORTS AND NOT LSTK_SANDBOX_USE_VTK )
  MESSAGE(FATAL_ERROR "In order to build the Report you MUST activate the option LSTK_SANDBOX_USE_VTK")
ENDIF( LSTK_SANDBOX_BUILD_REPORTS AND NOT LSTK_SANDBOX_USE_VTK )


ENABLE_TESTING()
INCLUDE(CTest)

INCLUDE_DIRECTORIES(
  ${LesionSizingToolkit_SOURCE_DIR}/Source
  )
set(LesionSizingToolkit_LIBRARIES  ITKIO ITKNumerics ITKCommon)

ADD_SUBDIRECTORY(Utilities)
IF(BUILD_TESTING)
  ADD_SUBDIRECTORY(Testing)
ENDIF(BUILD_TESTING)
ADD_SUBDIRECTORY(Examples)

INCLUDE(${LesionSizingToolkit_SOURCE_DIR}/Utilities/KWStyle/KWStyle.cmake)

IF(LSTK_SANDBOX_BUILD_REPORTS)
  ADD_SUBDIRECTORY(Documents)
ENDIF(LSTK_SANDBOX_BUILD_REPORTS)
